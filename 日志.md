# 日志记录



#### 日志1 

I (5164) TtsSpeaker: 初始化TTS Speaker
D (5164) esp_netif_lwip: LwIP stack has been initialized
D (5164) esp_netif_lwip: esp-netif has been successfully initialized
D (5174) mqtt_client: MQTT client_id=ESP32-TTS-Speaker
D (5174) event: created event loop 0x3fcd598c
D (5184) mqtt_client: Core selection disabled
D (5184) event: running post MQTT_EVENTS:7 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

I (5194) TtsSpeaker: MQTT准备连接...
D (5194) esp-tls: host:106.53.179.231: strlen 14
D (5204) esp-tls: [sock=54] Resolved IPv4 address: 106.53.179.231
D (5204) esp-tls: [sock=54] Connecting to server. HOST: 106.53.179.231, Port: 1883
E (5214) esp-tls: [sock=54] connect() error: Host is unreachable
E (5224) transport_base: Failed to open a new connection: 32772
E (5224) mqtt_client: Error transport connect
D (5234) event: running post MQTT_EVENTS:0 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

E (5244) TtsSpeaker: MQTT Error occurred
D (5244) mqtt_client: Reconnect after 10000 ms
D (5244) event: running post MQTT_EVENTS:2 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

I (5254) TtsSpeaker: MQTT Disconnected
D (5264) esp_netif_lwip: esp-netif has been successfully initialized
D (5264) mqtt_client: MQTT client_id=ESP32-Controller
D (5274) event: created event loop 0x3fcd7a94
D (5274) mqtt_client: Core selection disabled
D (5284) event: running post MQTT_EVENTS:7 with handler 0x42017a3c and context 0x3fcd8590 on loop 0x3fcd7a94
--- 0x42017a3c: iot::ESPController::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/espcontroller.cc:60

D (5284) esp-tls: host:106.53.179.231: strlen 14
D (5294) esp-tls: [sock=54] Resolved IPv4 address: 106.53.179.231
D (5294) esp-tls: [sock=54] Connecting to server. HOST: 106.53.179.231, Port: 1883
E (5304) esp-tls: [sock=54] connect() error: Host is unreachable
E (5314) transport_base: Failed to open a new connection: 32772
E (5314) mqtt_client: Error transport connect
D (5324) event: running post MQTT_EVENTS:0 with handler 0x42017a3c and context 0x3fcd8590 on loop 0x3fcd7a94
--- 0x42017a3c: iot::ESPController::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/espcontroller.cc:60

D (5334) mqtt_client: Reconnect after 10000 ms
D (5334) event: running post MQTT_EVENTS:2 with handler 0x42017a3c and context 0x3fcd8590 on loop 0x3fcd7a94
--- 0x42017a3c: iot::ESPController::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/espcontroller.cc:60

I (5344) uart: ESP_INTR_FLAG_IRAM flag not set while CONFIG_UART_ISR_IN_IRAM is enabled, flag updated
D (5354) intr_alloc: Connected src 28 to int 12 (cpu 0)
D (5354) ledc: Using clock source 4 (in slow mode), divisor: 0x320
D (5364) ledc: In slow speed mode, global clk set: 4
D (5374) ledc: LEDC_PWM CHANNEL 0|GPIO 42|Duty 0000|Time 0
D (5374) nvs: nvs_open_from_partition display 0
D (5374) nvs: nvs_get brightness 4
I (5384) Backlight: Set brightness to 40
D (5384) nvs: nvs_close 5
D (5384) i2s_common: tx channel is registered on I2S0 successfully
D (5394) i2s_common: DMA malloc info: dma_desc_num = 6, dma_desc_buf_size = dma_frame_num * slot_num * data_bit_width = 960
D (5404) i2s_std: Clock division info: [sclk] 160000000 Hz [mdiv] 26 [mclk] 6144000 Hz [bdiv] 4 [bclk] 1536000 Hz
D (5414) gdma: new pair (0,1) at 0x3fcdc284
D (5414) gdma: new tx channel (0,1) at 0x3fcdc24c
D (5424) intr_alloc: Connected src 72 to int 13 (cpu 0)
D (5424) gdma: install interrupt service for tx channel (0,1)
D (5434) i2s_std: The tx channel on I2S0 has been initialized to STD mode successfully
D (5444) i2s_common: rx channel is registered on I2S1 successfully
D (5444) i2s_common: DMA malloc info: dma_desc_num = 6, dma_desc_buf_size = dma_frame_num * slot_num * data_bit_width = 960
D (5454) i2s_std: Clock division info: [sclk] 160000000 Hz [mdiv] 39 [mclk] 4096000 Hz [bdiv] 4 [bclk] 1024000 Hz
D (5464) gdma: new rx channel (0,1) at 0x3fcdf24c
D (5474) intr_alloc: Connected src 67 to int 17 (cpu 0)
D (5474) gdma: install interrupt service for rx channel (0,1)
D (5484) i2s_std: The rx channel on I2S1 has been initialized to STD mode successfully
I (5494) NoAudioCodec: Simplex channels created
I (5494) Application: STATE: starting
D (5494) rmt: new group(0) at 0x3c3711f8, occupy=ffffff00
D (5504) intr_alloc: Connected src 40 to int 18 (cpu 0)
D (5504) rmt: group clock resolution:80000000
D (5514) rmt: new tx channel(0,0) at 0x3c370fa4, gpio=48, res=10000000Hz, hw_mem_base=0x60016800, dma_mem_base=0x0, dma_nodes=0x0, ping_pong_size=24, queue_depth=4
D (5524) rmt: new bytes encoder @0x3c371240
D (5534) rmt: new copy encoder @0x3c371264
I (5534) Application: WiFi board detected, setting opus encoder complexity to 3
D (5544) nvs: nvs_open_from_partition audio 0
D (5544) spi_master: device0 locked the bus
D (5544) nvs: nvs_get output_volume 4
D (5544) spi_master: device0 release bus
D (5554) i2s_common: i2s tx channel enabled
D (5554) spi_master: device0 locked the bus
D (5564) i2s_common: i2s rx channel enabled
D (5564) spi_master: device0 release bus
I (5564) AudioCodec: Set input enable to true
D (5574) spi_master: device0 locked the bus
I (5574) AudioCodec: Set output enable to true
D (5584) spi_master: device0 release bus
I (5584) AudioCodec: Audio codec started
D (5594) spi_master: device0 locked the bus
D (5594) nvs: nvs_close 6
D (5594) spi_master: device0 release bus
D (5594) nvs: nvs_open_from_partition wifi 0
D (5604) spi_master: device0 locked the bus
D (5604) nvs: nvs_get_str_or_blob ssid
D (5604) spi_master: device0 release bus
D (5614) nvs: nvs_get_str_or_blob password
D (5614) spi_master: device0 locked the bus
D (5624) nvs: nvs_get_str_or_blob ssid1
D (5624) spi_master: device0 release bus
D (5624) nvs: nvs_get_str_or_blob ssid2
D (5634) spi_master: device0 locked the bus
D (5634) nvs: nvs_get_str_or_blob ssid3
D (5634) spi_master: device0 release bus
D (5644) nvs: nvs_get_str_or_blob ssid4
D (5644) spi_master: device0 locked the bus
D (5644) nvs: nvs_get_str_or_blob ssid5
D (5654) spi_master: device0 release bus
D (5654) nvs: nvs_get_str_or_blob ssid6
D (5664) spi_master: device0 locked the bus
D (5664) nvs: nvs_get_str_or_blob ssid7
D (5664) spi_master: device0 release bus
D (5674) nvs: nvs_get_str_or_blob ssid8
D (5674) spi_master: device0 locked the bus
D (5674) nvs: nvs_get_str_or_blob ssid9
D (5684) spi_master: device0 release bus
D (5684) nvs: nvs_close 7
D (5694) spi_master: device0 locked the bus
D (5694) esp_netif_lwip: esp-netif has been successfully initialized
D (5694) spi_master: device0 release bus
D (5704) esp_netif_lwip: check: remote, if=0x3fcb6180 fn=0x420f4a20
--- 0x420f4a20: esp_netif_new_api at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:712

D (5704) spi_master: device0 locked the bus
D (5714) esp_netif_objects: esp_netif_add_to_list_unsafe netif added successfully (total netifs: 1)
D (5714) spi_master: device0 release bus
D (5724) esp_netif_lwip: call api in lwip: ret=0x0, give sem
D (5724) spi_master: device0 locked the bus
I (5734) pp: pp rom version: e7ae62f
D (5734) spi_master: device0 release bus
I (5744) net80211: net80211 rom version: e7ae62f
D (5744) spi_master: device0 locked the bus
I (5754) wifi:D (5754) spi_master: device0 release bus
wifi driver task: 3fce41e4, prio:23, stack:6656, core=0D (5754) spi_master: device0 locked the bus
D (5764) spi_master: device0 release bus
D (5774) spi_master: device0 locked the bus
D (5774) spi_master: device0 release bus
D (5774) spi_master: device0 locked the bus
D (5784) spi_master: device0 release bus
D (5784) spi_master: device0 locked the bus
D (5784) spi_master: device0 release bus
D (5794) spi_master: device0 locked the bus
D (5794) spi_master: device0 release bus
D (5804) spi_master: device0 locked the bus
D (5804) spi_master: device0 release bus
D (5804) spi_master: device0 locked the bus
D (5814) spi_master: device0 release bus
D (5814) spi_master: device0 locked the bus
D (5814) spi_master: device0 release bus
D (5824) spi_master: device0 locked the bus
D (5824) spi_master: device0 release bus
D (5834) spi_master: device0 locked the bus
D (5834) spi_master: device0 release bus
D (5834) spi_master: device0 locked the bus
D (5844) spi_master: device0 release bus
D (5844) spi_master: device0 locked the bus
D (5844) spi_master: device0 release bus
D (5854) spi_master: device0 locked the bus
D (5854) spi_master: device0 release bus
D (5864) spi_master: device0 locked the bus
D (5864) spi_master: device0 release bus
D (5864) spi_master: device0 locked the bus
D (5874) spi_master: device0 release bus
D (5874) spi_master: device0 locked the bus
D (5874) spi_master: device0 release bus
D (5884) spi_master: device0 locked the bus
D (5884) spi_master: device0 release bus
D (5894) spi_master: device0 locked the bus
D (5894) spi_master: device0 release bus
D (5894) spi_master: device0 locked the bus
D (5904) spi_master: device0 release bus

D (5904) efuse: BLK1 REG1 [8-15], len=8 bits
D (5914) efuse: BLK1 REG1 [0-7], len=8 bits
D (5914) efuse: BLK1 REG0 [24-31], len=8 bits
D (5914) efuse: BLK1 REG0 [16-23], len=8 bits
D (5924) efuse: BLK1 REG0 [8-15], len=8 bits
D (5924) efuse: BLK1 REG0 [0-7], len=8 bits
I (5934) wifi:wifi firmware version: 79fa3f41ba
I (5934) wifi:wifi certification version: v7.0
I (5934) wifi:config NVS flash: disabled
I (5944) wifi:config nano formatting: disabled
I (5944) wifi:Init data frame dynamic rx buffer num: 32
I (5954) wifi:Init dynamic rx mgmt buffer num: 5
I (5954) wifi:Init management short buffer num: 32
I (5964) wifi:Init static tx buffer num: 16
I (5964) wifi:Init tx cache buffer num: 32
I (5964) wifi:Init static tx FG buffer num: 2
I (5974) wifi:Init static rx buffer size: 1600
I (5974) wifi:Init static rx buffer num: 16
I (5984) wifi:Init dynamic rx buffer num: 32
D (5984) wifi:Reset scan defaults in ms : min,max,passive,chan_dwell :(0,120,360,30)
I (5994) wifi_init: rx ba win: 16
I (5994) wifi_init: accept mbox: 6
I (5994) wifi_init: tcpip mbox: 32
I (6004) wifi_init: udp mbox: 6
I (6004) wifi_init: tcp mbox: 6
I (6004) wifi_init: tcp tx win: 5760
I (6004) wifi_init: tcp rx win: 5760
I (6014) wifi_init: tcp mss: 1440
I (6014) wifi_init: WiFi/LWIP prefer SPIRAM
I (6024) phy_init: phy_version 700,8582a7fd,Feb 10 2025,20:13:11
D (6024) phy_init: loading PHY init data from application binary
D (6034) nvs: nvs_open_from_partition phy 0
D (6034) nvs: nvs_get cal_version 4
D (6034) nvs: nvs_get_str_or_blob cal_mac
D (6044) efuse: BLK1 REG1 [8-15], len=8 bits
D (6044) efuse: BLK1 REG1 [0-7], len=8 bits
D (6054) efuse: BLK1 REG0 [24-31], len=8 bits
D (6054) efuse: BLK1 REG0 [16-23], len=8 bits
D (6054) efuse: BLK1 REG0 [8-15], len=8 bits
D (6064) efuse: BLK1 REG0 [0-7], len=8 bits
D (6064) nvs: nvs_get_str_or_blob cal_data
D (6074) nvs: nvs_close 8
D (6074) efuse: BLK1 REG1 [8-15], len=8 bits
D (6074) efuse: BLK1 REG1 [0-7], len=8 bits
D (6084) efuse: BLK1 REG0 [24-31], len=8 bits
D (6084) efuse: BLK1 REG0 [16-23], len=8 bits
D (6084) efuse: BLK1 REG0 [8-15], len=8 bits
D (6094) efuse: BLK1 REG0 [0-7], len=8 bits
D (6114) temperature_sensor: range changed, change to index 2
D (6124) wifi:filter: set rx policy=0
I (6124) wifi:mode : sta (30:ed:a0:13:e8:40)
I (6124) wifi:enable tsf
D (6124) wifi:filter: set rx policy=1
D (6124) wifi:connect status 0 -> 0
D (6124) event: running post WIFI_EVENT:43 with handler 0x4201a77c and context 0x3fcd3a24 on loop 0x3fcc4180
--- 0x4201a77c: iot::TtsSpeaker::wifi_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:170

D (6134) event: running post WIFI_EVENT:43 with handler 0x4204f430 and context 0x3fcdf5a0 on loop 0x3fcc4180
--- 0x4204f430: WifiStation::WifiEventHandler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-wifi-connect/wifi_station.cc:205

D (6144) event: running post WIFI_EVENT:2 with handler 0x4201a77c and context 0x3fcd3a24 on loop 0x3fcc4180
--- 0x4201a77c: iot::TtsSpeaker::wifi_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:170

D (6154) wifi:Start wifi connect
D (6154) wifi:connect status 0 -> 0
D (6164) wifi:sta_connect: invalid ssid
D (6164) event: running post WIFI_EVENT:2 with handler 0x4204f430 and context 0x3fcdf5a0 on loop 0x3fcc4180
--- 0x4204f430: WifiStation::WifiEventHandler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-wifi-connect/wifi_station.cc:205

D (6174) wifi:Start wifi scan
D (6174) wifi:sta_scan: default parameters, hidden=0, type=active, dur=<0,120>
D (6184) wifi:first chan=1
D (6184) wifi:filter: set rx policy=3
D (6194) wifi:clear scan ap list
D (6194) wifi:start scan: type=0x10f, priority=3, cb=0x0, arg=0x3fcaf25c, ss_state=0x1, time=6198047, index=0
D (6204) wifi:perform scan: ss_state=0x9, chan<1,0>, dur<0,120>
D (6214) event: running post WIFI_EVENT:2 with handler 0x420f70cc and context 0x3fce1970 on loop 0x3fcc4180
--- 0x420f70cc: wifi_default_action_sta_start at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_wifi/src/wifi_default.c:72

D (6214) spi_master: device0 locked the bus
D (6214) wifi_init_default: wifi_start esp-netif:0x3fce17d0 event-id2
D (6224) spi_master: device0 release bus
D (6224) wifi_init_default: WIFI mac address: 30 ed a0 13 e8 40
D (6234) spi_master: device0 locked the bus
D (6234) esp_netif_lwip: check: remote, if=0x3fce17d0 fn=0x420f4038
--- 0x420f4038: esp_netif_set_mac_api at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:1018

D (6244) spi_master: device0 release bus
D (6244) esp_netif_lwip: call api in lwip: ret=0x0, give sem
D (6254) spi_master: device0 locked the bus
D (6264) spi_master: device0 release bus
D (6264) spi_master: device0 locked the bus
D (6264) spi_master: device0 release bus
D (6264) esp_netif_handlers: esp_netif action has started with netif0x3fce17d0 from event_id=2
D (6274) spi_master: device0 locked the bus
D (6284) esp_netif_lwip: check: remote, if=0x3fce17d0 fn=0x420f4c44
--- 0x420f4c44: esp_netif_start_api at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:1093

D (6284) spi_master: device0 release bus
D (6294) esp_netif_lwip: esp_netif_start_api 0x3fce17d0
D (6294) spi_master: device0 locked the bus
D (6304) spi_master: device0 release bus
D (6304) esp_netif_lwip: esp_netif_get_hostname esp_netif:0x3fce17d0
D (6314) esp_netif_lwip: call api in lwip: ret=0x0, give sem
D (6324) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6324) wifi:perform scan: ss_state=0x9, chan<2,0>, dur<0,120>
D (6454) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6454) wifi:perform scan: ss_state=0x9, chan<3,0>, dur<0,120>
D (6494) spi_master: device0 locked the bus
D (6494) spi_master: device0 release bus
D (6494) spi_master: device0 locked the bus
D (6504) spi_master: device0 release bus
D (6504) spi_master: device0 locked the bus
D (6504) spi_master: device0 release bus
D (6514) spi_master: device0 locked the bus
D (6514) spi_master: device0 release bus
D (6514) spi_master: device0 locked the bus
D (6524) spi_master: device0 release bus
D (6524) spi_master: device0 locked the bus
D (6534) spi_master: device0 release bus
D (6574) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6574) wifi:perform scan: ss_state=0x9, chan<4,0>, dur<0,120>
D (6694) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6694) wifi:perform scan: ss_state=0x9, chan<5,0>, dur<0,120>
D (6814) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6814) wifi:perform scan: ss_state=0x9, chan<6,0>, dur<0,120>
D (6934) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (6934) wifi:perform scan: ss_state=0x9, chan<7,0>, dur<0,120>
D (7054) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7054) wifi:perform scan: ss_state=0x9, chan<8,0>, dur<0,120>
D (7174) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7174) wifi:perform scan: ss_state=0x9, chan<9,0>, dur<0,120>
D (7294) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7294) wifi:perform scan: ss_state=0x9, chan<10,0>, dur<0,120>
D (7414) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7414) wifi:perform scan: ss_state=0x9, chan<11,0>, dur<0,120>
D (7534) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7534) wifi:perform scan: ss_state=0x9, chan<12,0>, dur<360,360>
D (7904) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (7904) wifi:perform scan: ss_state=0x9, chan<13,0>, dur<360,360>
D (8264) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (8264) wifi:perform scan: ss_state=0x9, chan<14,0>, dur<360,360>
D (8624) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x3
D (8624) wifi:filter: set rx policy=4
D (8624) wifi:first chan=1
D (8624) wifi:Send scan done event: status=0, apnum=4
D (8624) event: running post WIFI_EVENT:1 with handler 0x4201a77c and context 0x3fcd3a24 on loop 0x3fcc4180
--- 0x4201a77c: iot::TtsSpeaker::wifi_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:170

D (8634) event: running post WIFI_EVENT:1 with handler 0x4204f430 and context 0x3fcdf5a0 on loop 0x3fcc4180
--- 0x4204f430: WifiStation::WifiEventHandler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-wifi-connect/wifi_station.cc:205

I (8644) wifi: Found AP: REDMI by Ash, BSSID: d2:f3:59:00:54:f1, RSSI: -22, Channel: 1, Authmode: 3
D (8654) wifi:clear blacklist
W (8654) wifi:Password length matches WPA2 standards, authmode threshold changes from OPEN to WPA2
D (8654) spi_master: device0 locked the bus
D (8664) wifi:D (8674) spi_master: device0 release bus
Start wifi connectD (8674) spi_master: device0 locked the bus

D (8684) spi_master: device0 release bus
D (8684) wifi:D (8684) spi_master: device0 locked the bus
connect status 0 -> 0
D (8684) spi_master: device0 release bus
D (8694) wifi:connect chan=0
D (8694) spi_master: device0 locked the bus
D (8694) wifi:first chan=1D (8704) spi_master: device0 release bus

D (8704) spi_master: device0 locked the bus
D (8704) wifi:connect status 0 -> 1D (8714) spi_master: device0 release bus

D (8714) spi_master: device0 locked the bus
D (8714) wifi:filter: set rx policy=3D (8724) spi_master: device0 release bus

D (8724) wifi:clear scan ap list
D (8734) wifi:start scan: type=0x50f, priority=2, cb=0x42126ca8, arg=0x0, ss_state=0x1, time=8735950, index=0
--- 0x42126ca8: cnx_start_handoff_cb at ??:?

D (8744) wifi:perform scan: ss_state=0x9, chan<1,0>, dur<0,120>
D (8754) wifi:rsn valid: gcipher=3 ucipher=3 akm=5 mac=d2:f3:59:00:54:f1
D (8754) wifi:bssid equal: ss_state=0x7
D (8754) wifi:profile match: ss_state=0x7
D (8764) wifi:rsn valid: gcipher=3 ucipher=3 akm=5 mac=d2:f3:59:00:54:f1
D (8764) wifi:bssid equal: ss_state=0x7
D (8774) wifi:profile match: ss_state=0x7
D (8774) wifi:scan end: arg=0x3fcaf408, status=0, ss_state=0x7
D (8784) wifi:find first mathched ssid, scan done
D (8784) wifi:filter: set rx policy=4
D (8784) wifi:first chan=1
D (8794) wifi:handoff_cb: status=0
D (8794) wifi:ap found, mac=d2:f3:59:00:54:f1
D (8794) gdma: new pair (0,2) at 0x3fceeb08
D (8804) gdma: new tx channel (0,2) at 0x3fceedb8
D (8804) gdma: new rx channel (0,2) at 0x3fceeb50
D (9144) wifi:going for connection with bssid=d2:f3:59:00:54:f1
D (9144) wifi:new_bss=0x3fcadb60, cur_bss=0x0, new_chan=<1,0>, cur_chan=1
D (9144) wifi:filter: set rx policy=5
I (9144) wifi:new:<1,0>, old:<1,0>, ap:<255,255>, sta:<1,0>, prof:1, snd_ch_cfg:0x0
D (9154) wifi:connect_op: status=0, auth=5, cipher=3
D (9154) wifi:auth mode is not none
D (9164) wifi:connect_bss: auth=1, reconnect=0
I (9164) wifi:state: init -> auth (0xb0)
D (9174) wifi:start 1s AUTH timer
D (9174) wifi:clear scan ap list
D (9184) wifi:recv auth: seq=2, status=0, algo=0
I (9184) wifi:state: auth -> assoc (0x0)
D (9184) wifi:restart connect 1s timer for assoc
D (9204) wifi:recv assoc: type=0x10
D (9204) wifi:filter: set rx policy=6
I (9204) wifi:state: assoc -> run (0x10)
D (9204) wifi:start 10s connect timer for 4 way handshake
D (9224) intr_alloc: Connected src 77 to int 19 (cpu 0)
I (9224) wifi:connected with REDMI by Ash, aid = 4, channel 1, BW20, bssid = d2:f3:59:00:54:f1
I (9224) wifi:security: WPA2-PSK, phy: bgn, rssi: -23
D (9224) wifi:remove all except d2:f3:59:00:54:f1 from rc list
D (9234) wifi:clear blacklist
D (9234) wifi:filter: set rx policy=7
I (9244) wifi:pm start, type: 1

I (9244) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (9254) wifi:set rx beacon pti, rx_bcn_pti: 0, bcn_timeout: 25000, mt_pti: 0, mt_time: 10000
D (9264) wifi:Send sta connected event
D (9264) wifi:connect status 1 -> 5
D (9264) wifi:obss scan is disabled
D (9274) wifi:start obss scan: obss scan is stopped
I (9274) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (9284) wifi:AP's beacon interval = 102400 us, DTIM period = 2
D (9284) wifi:bssid equal: ss_state=0x4
D (9294) event: running post WIFI_EVENT:4 with handler 0x4201a77c and context 0x3fcd3a24 on loop 0x3fcc4180
--- 0x4201a77c: iot::TtsSpeaker::wifi_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:170

D (9304) event: running post WIFI_EVENT:4 with handler 0x4204f430 and context 0x3fcdf5a0 on loop 0x3fcc4180
--- 0x4204f430: WifiStation::WifiEventHandler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-wifi-connect/wifi_station.cc:205

D (9314) event: running post WIFI_EVENT:4 with handler 0x420f70fc and context 0x3fce19d0 on loop 0x3fcc4180
--- 0x420f70fc: wifi_default_action_sta_connected at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_wifi/src/wifi_default.c:86

D (9324) esp_netif_handlers: esp_netif action connected with netif0x3fce17d0 from event_id=4
D (9324) esp_netif_lwip: check: remote, if=0x3fce17d0 fn=0x420f4e70
--- 0x420f4e70: esp_netif_up_api at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:1723

D (9334) esp_netif_lwip: esp_netif_up_api esp_netif:0x3fce17d0
D (9334) esp_netif_lwip: call api in lwip: ret=0x0, give sem
D (9344) esp_netif_lwip: check: remote, if=0x3fce17d0 fn=0x420f4680
--- 0x420f4680: esp_netif_dhcpc_start_api at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:1515

D (9354) esp_netif_lwip: esp_netif_dhcpc_start_api esp_netif:0x3fce17d0
D (9354) esp_netif_lwip: esp_netif_start_ip_lost_timer esp_netif:0x3fce17d0
D (9364) esp_netif_lwip: if0x3fce17d0 start ip lost tmr: interval=120
D (9374) esp_netif_lwip: starting dhcp client
D (9374) esp_netif_lwip: call api in lwip: ret=0x0, give sem
D (9374) wifi:eb is dhcp or dns sport = 68, dport = 67
D (9394) wifi:eb is dhcp or dns sport = 68, dport = 67
I (9404) wifi:<ba-add>idx:0 (ifx:0, d2:f3:59:00:54:f1), tid:0, ssn:1, winSize:64
D (9674) wifi:bssid equal: ss_state=0x4
D (10414) esp_netif_lwip: esp_netif_internal_dhcpc_cb lwip-netif:0x3fce183c
D (10414) esp_netif_lwip: check: local, if=0x3fce17d0 fn=0x420f5400
--- 0x420f5400: esp_netif_update_default_netif_lwip at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_netif/lwip/esp_netif_lwip.c:313

D (10414) esp_netif_lwip: esp_netif_update_default_netif_lwip 0x3fce17d0
D (10414) esp_netif_lwip: if0x3fce17d0 ip changed=1
D (10424) event: running post IP_EVENT:0 with handler 0x4201a76c and context 0x3fcd4f90 on loop 0x3fcc4180
--- 0x4201a76c: iot::TtsSpeaker::ip_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:182

E (10434) mqtt_client: Client has started
D (10434) event: running post IP_EVENT:0 with handler 0x4204ec6c and context 0x3fcdf5c0 on loop 0x3fcc4180
--- 0x4204ec6c: WifiStation::IpEventHandler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-wifi-connect/wifi_station.cc:234

I (10444) wifi: Got IP: 192.168.156.248
D (10444) event: running post IP_EVENT:0 with handler 0x420f6f28 and context 0x3fce1a80 on loop 0x3fcc4180
--- 0x420f6f28: wifi_default_action_sta_got_ip at C:/Users/29739/esp/v5.4.1/esp-idf/components/esp_wifi/src/wifi_default.c:128

D (10454) spi_master: device0 locked the bus
D (10454) wifi_init_default: Got IP wifi default handler entered
D (10464) spi_master: device0 release bus
D (10464) esp_netif_handlers: esp_netif action got_ip with netif0x3fce17d0 from event_id=0
D (10474) spi_master: device0 locked the bus
I (10474) esp_netif_handlers: sta ip: 192.168.156.248, mask: 255.255.255.0, gw: 192.168.156.124
D (10484) spi_master: device0 release bus
D (10454) nvs: nvs_open_from_partition system 0
D (10494) spi_master: device0 locked the bus
D (10494) wifi:D (10504) spi_master: device0 release bus
bssid equal: ss_state=0x4
D (10514) spi_master: device0 locked the bus
D (10504) nvs: nvs_get disable_ota 4
D (10514) spi_master: device0 release bus
I (10514) Application: OTA功能已禁用
D (10524) spi_master: device0 locked the bus
D (10534) spi_master: device0 release bus
D (10534) spi_master: device0 locked the bus
D (10534) spi_master: device0 release bus
D (10544) nvs: nvs_close 9
D (10544) nvs: nvs_open_from_partition mqtt 0
D (10544) nvs: nvs_get_str_or_blob endpoint
D (10554) spi_master: device0 locked the bus
D (10554) nvs: nvs_get_str_or_blob endpoint
D (10554) spi_master: device0 release bus
D (10564) nvs: nvs_get_str_or_blob client_id
D (10564) spi_master: device0 locked the bus
D (10564) nvs: nvs_get_str_or_blob client_id
D (10574) spi_master: device0 release bus
D (10574) nvs: nvs_get_str_or_blob username
D (10574) spi_master: device0 locked the bus
D (10584) nvs: nvs_get_str_or_blob username
D (10584) spi_master: device0 release bus
D (10594) nvs: nvs_get_str_or_blob password
D (10594) spi_master: device0 locked the bus
D (10594) nvs: nvs_get_str_or_blob password
D (10604) spi_master: device0 release bus
D (10604) nvs: nvs_get_str_or_blob publish_topic
D (10614) spi_master: device0 locked the bus
D (10614) nvs: nvs_get_str_or_blob publish_topic
D (10614) spi_master: device0 release bus
I (10624) MQTT: Connecting to endpoint mqtt.xiaozhi.me
D (10624) spi_master: device0 locked the bus
D (10634) spi_master: device0 release bus
D (10644) mqtt_client: MQTT client_id=GID_test@@@30_ed_a0_13_e8_40@@@9ac92877-c3cd-4617-b037-e0948c2edf4e
D (10644) event: created event loop 0x600fef7c
D (10654) mqtt_client: Core selection disabled
D (10654) event: running post MQTT_EVENTS:7 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (10664) esp-tls: host:mqtt.xiaozhi.me: strlen 15
D (10674) wifi:eb is dhcp or dns sport = 7786, dport = 53
D (10704) esp-tls: [sock=54] Resolved IPv4 address: 47.112.110.152
D (10704) esp-tls: [sock=54] Connecting to server. HOST: mqtt.xiaozhi.me, Port: 8883
D (10744) esp-tls-mbedtls: Use certificate bundle
D (10744) esp-tls: handshake in progress...
D (10904) wifi:bssid equal: ss_state=0x4
D (10924) intr_alloc: Connected src 76 to int 2 (cpu 1)
D (10934) esp-x509-crt-bundle: 152 certificates in bundle
I (10944) esp-x509-crt-bundle: Certificate validated
D (11314) wifi:bssid equal: ss_state=0x4
D (11344) mqtt_client: Transport connected to mqtts://mqtt.xiaozhi.me:8883
D (11354) mqtt_client: Sending MQTT CONNECT message, type: 1, id: 0000
D (11374) SSL TLS: add mbedtls RX buffer
D (11374) SSL TLS: end
D (11384) SSL TLS: RX left 3 bytes
D (11384) mqtt_client: mqtt_message_receive: first byte: 0x20
D (11384) transport_base: remain data in cache, need to read again
D (11384) SSL TLS: add mbedtls RX buffer
D (11394) SSL TLS: end
D (11394) SSL TLS: RX left 2 bytes
D (11394) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x2
D (11404) mqtt_client: mqtt_message_receive: total message length: 4 (already read: 2)
D (11414) transport_base: remain data in cache, need to read again
D (11414) SSL TLS: add mbedtls RX buffer
D (11424) SSL TLS: end
D (11424) mqtt_client: mqtt_message_receive: read_len=2
D (11424) mqtt_client: Connected
D (11434) event: running post MQTT_EVENTS:1 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (11444) MQTT: Connected to endpoint
D (11444) nvs: nvs_close 10
I (11444) MODEL_LOADER: The storage free size is 21056 KB
I (11454) MODEL_LOADER: The partition size is 960 KB
I (11454) MODEL_LOADER: Successfully load srmodels
I (11464) AFE: AFE Version: (1MIC_V250121)
I (11464) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (11474) AFE: AFE Pipeline: [input] -> |NS(WebRTC)| -> |VAD(WebRTC)| -> [output]
I (11484) AudioProcessor: Audio communication task started, feed size: 160 fetch size: 512
I (11494) WakeWordDetect: Model 0: wn9_nihaoxiaozhi_tts
I (11494) AFE_CONFIG: Set WakeNet Model: wn9_nihaoxiaozhi_tts
MC Quantized wakenet9: wakenet9l_tts1h8_你好小智_3_0.631_0.635, tigger:v3, mode:0, p:0, (Apr 17 2025 15:53:24)
I (11544) AFE: AFE Version: (1MIC_V250121)
I (11544) AFE: Input PCM Config: total 1 channels(1 microphone, 0 playback), sample rate:16000
I (11554) AFE: AFE Pipeline: [input] -> |VAD(WebRTC)| -> |WakeNet(wn9_nihaoxiaozhi_tts,)| ->  -> [output]
I (11564) WakeWordDetect: Audio detection task started, feed size: 512 fetch size: 512
I (11574) Application: STATE: idle
D (11574) spi_master: device0 locked the bus
D (11574) spi_master: device0 release bus
D (11584) spi_master: device0 locked the bus
D (11584) spi_master: device0 release bus
D (11584) spi_master: device0 locked the bus
D (11594) spi_master: device0 release bus
D (11594) spi_master: device0 locked the bus
D (11604) spi_master: device0 release bus
D (11604) spi_master: device0 locked the bus
D (11604) spi_master: device0 release bus
D (11614) spi_master: device0 locked the bus
D (11614) spi_master: device0 release bus
I (11624) AudioCodec: Set output enable to false
I (11624) AudioCodec: Set output enable to true
I (11624) Application: Resampling audio from 16000 to 24000
D (11634) spi_master: device0 locked the bus
D (11634) spi_master: device0 release bus
D (11644) spi_master: device0 locked the bus
D (11644) spi_master: device0 release bus
D (11644) spi_master: device0 locked the bus
D (11654) spi_master: device0 release bus
D (11654) spi_master: device0 locked the bus
D (11664) spi_master: device0 release bus
D (11664) spi_master: device0 locked the bus
D (11664) spi_master: device0 release bus
D (11674) spi_master: device0 locked the bus
D (11674) spi_master: device0 release bus
D (11684) spi_master: device0 locked the bus
D (11684) spi_master: device0 release bus
D (11684) spi_master: device0 locked the bus
D (11694) spi_master: device0 release bus
D (11694) spi_master: device0 locked the bus
D (11704) spi_master: device0 release bus
D (11704) spi_master: device0 locked the bus
D (11704) spi_master: device0 release bus
D (11714) spi_master: device0 locked the bus
D (11714) spi_master: device0 release bus
D (11714) spi_master: device0 locked the bus
D (11724) spi_master: device0 release bus
D (11724) spi_master: device0 locked the bus
D (11734) spi_master: device0 release bus
D (11734) spi_master: device0 locked the bus
D (11734) spi_master: device0 release bus
D (11744) spi_master: device0 locked the bus
D (11744) spi_master: device0 release bus
D (11754) spi_master: device0 locked the bus
D (11754) spi_master: device0 release bus
D (11754) spi_master: device0 locked the bus
D (11764) spi_master: device0 release bus
D (11764) spi_master: device0 locked the bus
D (11764) spi_master: device0 release bus
D (11774) spi_master: device0 locked the bus
D (11774) spi_master: device0 release bus
D (11784) spi_master: device0 locked the bus
D (11784) spi_master: device0 release bus
D (11784) spi_master: device0 locked the bus
D (11794) spi_master: device0 release bus
I (11794) OpusResampler: Resampler configured with input sample rate 16000 and output sample rate 24000
D (12544) wifi:bssid equal: ss_state=0x4
D (13364) wifi:bssid equal: ss_state=0x4
D (13874) wifi:bssid equal: ss_state=0x4
D (13974) wifi:bssid equal: ss_state=0x4
D (14184) wifi:bssid equal: ss_state=0x4
D (14624) spi_master: device0 locked the bus
D (14624) spi_master: device0 release bus
D (14624) spi_master: device0 locked the bus
D (14634) spi_master: device0 release bus
D (14634) spi_master: device0 locked the bus
D (14634) spi_master: device0 release bus
D (14644) spi_master: device0 locked the bus
D (14644) spi_master: device0 release bus
D (14644) spi_master: device0 locked the bus
D (14654) spi_master: device0 release bus
D (14654) spi_master: device0 locked the bus
D (14664) spi_master: device0 release bus
D (14794) wifi:bssid equal: ss_state=0x4
D (15264) mqtt_client: Reconnecting...
D (15264) event: running post MQTT_EVENTS:7 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

I (15264) TtsSpeaker: MQTT准备连接...
D (15264) esp-tls: host:106.53.179.231: strlen 14
D (15274) esp-tls: [sock=55] Resolved IPv4 address: 106.53.179.231
D (15274) esp-tls: [sock=55] Connecting to server. HOST: 106.53.179.231, Port: 1883
I (15324) wifi:<ba-add>idx:1 (ifx:0, d2:f3:59:00:54:f1), tid:4, ssn:0, winSize:64
D (15324) mqtt_client: Transport connected to mqtt://106.53.179.231:1883
D (15324) mqtt_client: Sending MQTT CONNECT message, type: 1, id: 0000
D (15344) mqtt_client: Reconnecting...
D (15344) event: running post MQTT_EVENTS:7 with handler 0x42017a3c and context 0x3fcd8590 on loop 0x3fcd7a94
--- 0x42017a3c: iot::ESPController::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/espcontroller.cc:60

D (15344) esp-tls: host:106.53.179.231: strlen 14
D (15344) esp-tls: [sock=56] Resolved IPv4 address: 106.53.179.231
D (15354) esp-tls: [sock=56] Connecting to server. HOST: 106.53.179.231, Port: 1883
D (15364) mqtt_client: mqtt_message_receive: first byte: 0x20
D (15364) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x2
D (15374) mqtt_client: mqtt_message_receive: total message length: 4 (already read: 2)
D (15384) mqtt_client: mqtt_message_receive: read_len=2
D (15384) mqtt_client: Connected
D (15384) event: running post MQTT_EVENTS:1 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

D (15384) mqtt_client: Transport connected to mqtt://106.53.179.231:1883
I (15394) TtsSpeaker: MQTT Connected
D (15404) mqtt_client: Sending MQTT CONNECT message, type: 1, id: 0000
D (15404) mqtt_client: mqtt_enqueue id: 55767, type=8 successful
D (15414) outbox: ENQUEUE msgid=55767, msg_type=8, len=26, size=26
D (15424) mqtt_client: Sent subscribe, first topic=xiaozhi/tts/message, id: 55767
I (15434) TtsSpeaker: Subscribed to topic xiaozhi/tts/message, msg_id=55767
D (15444) mqtt_client: mqtt_message_receive: first byte: 0x20
D (15444) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x2
D (15454) mqtt_client: mqtt_message_receive: total message length: 4 (already read: 2)
D (15454) mqtt_client: mqtt_message_receive: first byte: 0x90
D (15464) mqtt_client: mqtt_message_receive: read_len=2
D (15464) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x3
D (15464) mqtt_client: Connected
D (15474) mqtt_client: mqtt_message_receive: total message length: 5 (already read: 2)
D (15474) event: running post MQTT_EVENTS:1 with handler 0x42017a3c and context 0x3fcd8590 on loop 0x3fcd7a94
--- 0x42017a3c: iot::ESPController::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/espcontroller.cc:60

D (15484) mqtt_client: mqtt_message_receive: read_len=3
I (15494) ESPController: MQTT Connected
D (15504) mqtt_client: msg_type=9, msg_id=55767
D (15504) outbox: DELETED msgid=55767, msg_type=8, remain size=0
D (15514) mqtt_client: Removed pending_id=55767
D (15514) mqtt_client: deliver_suback, message_length_read=5, message_length=5
D (15524) event: running post MQTT_EVENTS:3 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

I (15534) TtsSpeaker: MQTT消息订阅成功，msg_id=55767
D (16024) wifi:bssid equal: ss_state=0x4
D (17254) wifi:bssid equal: ss_state=0x4
D (18484) wifi:bssid equal: ss_state=0x4
D (19714) wifi:bssid equal: ss_state=0x4
D (20734) wifi:bssid equal: ss_state=0x4
D (20744) mqtt_client: mqtt_message_receive: first byte: 0x30
D (20744) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x21
D (20744) mqtt_client: mqtt_message_receive: total message length: 35 (already read: 2)
D (20754) mqtt_client: mqtt_message_receive: read_len=33
D (20754) mqtt_client: msg_type=3, msg_id=0
D (20764) mqtt_client: deliver_publish, message_length_read=35, message_length=35
D (20764) mqtt_client: deliver_publish: msg_topic_len=19
D (20774) mqtt_client: Get data len= 12, topic len=19, total_data: 12 offset: 0
D (20784) event: running post MQTT_EVENTS:6 with handler 0x4201c390 and context 0x3fcd5a9c on loop 0x3fcd598c
--- 0x4201c390: iot::TtsSpeaker::mqtt_event_handler(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/main/iot/things/tts_speaker.cc:194

I (20794) TtsSpeaker: Received message on topic xiaozhi/tts/message: 潮州在哪
I (20794) TtsSpeaker: 收到MQTT TTS消息: 潮州在哪 (当前设备状态: 空闲)
I (20804) TtsSpeaker: 设备空闲，立即播放TTS消息: 潮州在哪
I (20814) TtsSpeaker: 开始TTS处理（模拟唤醒流程）：潮州在哪
D (20814) spi_master: device0 locked the bus
I (20814) Application: STATE: connecting
D (20824) spi_master: device0 release bus
D (20824) spi_master: device0 locked the bus
D (20834) spi_master: device0 release bus
D (20834) spi_master: device0 locked the bus
D (20844) spi_master: device0 release bus
D (20844) spi_master: device0 locked the bus
D (20844) spi_master: device0 release bus
D (20854) spi_master: device0 locked the bus
D (20854) spi_master: device0 release bus
D (20864) spi_master: device0 locked the bus
D (20864) spi_master: device0 release bus
D (20864) spi_master: device0 locked the bus
D (20874) spi_master: device0 release bus
D (20874) spi_master: device0 locked the bus
D (20884) spi_master: device0 release bus
D (20884) spi_master: device0 locked the bus
D (20884) spi_master: device0 release bus
I (20894) TtsSpeaker: 尝试打开音频通道...
I (20894) MQTT: MqttProtocol::SendText sending: {"type":"hello","version": 3,"transport":"udp","audio_params":{"format":"opus", "sample_rate":16000, "channels":1, "frame_duration":60}}
D (20904) spi_master: device0 locked the bus
I (20914) MQTT: MqttProtocol::SendText published successfully to topic: device-server
D (20914) spi_master: device0 release bus
D (20924) spi_master: device0 locked the bus
D (20934) spi_master: device0 release bus
D (20934) spi_master: device0 locked the bus
D (20934) spi_master: device0 release bus
D (20944) spi_master: device0 locked the bus
D (20944) spi_master: device0 release bus
D (20954) spi_master: device0 locked the bus
D (20954) spi_master: device0 release bus
D (20954) spi_master: device0 locked the bus
D (20964) spi_master: device0 release bus
D (20964) spi_master: device0 locked the bus
D (20974) spi_master: device0 release bus
D (20974) spi_master: device0 locked the bus
D (20974) spi_master: device0 release bus
D (20984) spi_master: device0 locked the bus
D (20984) spi_master: device0 release bus
D (20994) spi_master: device0 locked the bus
D (20994) spi_master: device0 release bus
D (20994) spi_master: device0 locked the bus
D (21004) spi_master: device0 release bus
D (21004) spi_master: device0 locked the bus
D (21004) spi_master: device0 release bus
D (21014) spi_master: device0 locked the bus
D (21014) spi_master: device0 release bus
D (21024) spi_master: device0 locked the bus
D (21024) SSL TLS: add mbedtls RX buffer
D (21024) spi_master: device0 release bus
D (21024) SSL TLS: end
D (21034) spi_master: device0 locked the bus
D (21034) SSL TLS: RX left 345 bytes
D (21034) spi_master: device0 release bus
D (21044) mqtt_client: mqtt_message_receive: first byte: 0x30
D (21044) spi_master: device0 locked the bus
D (21054) transport_base: remain data in cache, need to read again
D (21054) spi_master: device0 release bus
D (21064) SSL TLS: add mbedtls RX buffer
D (21064) spi_master: device0 locked the bus
D (21064) SSL TLS: end
D (21074) spi_master: device0 release bus
D (21074) SSL TLS: RX left 344 bytes
D (21074) spi_master: device0 locked the bus
D (21084) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0xd7
D (21084) spi_master: device0 release bus
D (21094) transport_base: remain data in cache, need to read again
D (21094) spi_master: device0 locked the bus
D (21104) SSL TLS: add mbedtls RX buffer
D (21104) spi_master: device0 release bus
D (21104) SSL TLS: end
D (21114) spi_master: device0 locked the bus
D (21114) SSL TLS: RX left 343 bytes
D (21114) spi_master: device0 release bus
D (21124) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x2
D (21124) spi_master: device0 locked the bus
D (21134) mqtt_client: mqtt_message_receive: total message length: 346 (already read: 3)
D (21134) spi_master: device0 release bus
D (21144) transport_base: remain data in cache, need to read again
D (21154) SSL TLS: add mbedtls RX buffer
D (21154) SSL TLS: end
D (21154) mqtt_client: mqtt_message_receive: read_len=343
D (21164) mqtt_client: msg_type=3, msg_id=0
D (21164) mqtt_client: deliver_publish, message_length_read=346, message_length=346
D (21174) mqtt_client: deliver_publish: msg_topic_len=29
D (21184) mqtt_client: Get data len= 312, topic len=29, total_data: 312 offset: 0
D (21184) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (21194) MQTT: Session ID: 32cc56d6
I (21204) wifi:Set ps type: 0, coexist: 0

I (21214) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"iot","update":true,"descriptors":[{"name":"Speaker","description":"扬声器","properties":{"volume":{"description":"当前音量值","type":"number"}},"methods":{"SetVolume":{"description":"设置音量","parameters":{"volume":{"description":"0到100之间的整数","type":"number"}}}}}]}
I (21244) MQTT: MqttProtocol::SendText published successfully to topic: device-server
I (21244) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"iot","update":true,"descriptors":[{"name":"Screen","description":"这是一个屏幕，可设置主题和亮度","properties":{"theme":{"description":"主题","type":"string"},"brightness":{"description":"当前亮度百分 比","type":"number"}},"methods":{"SetTheme":{"description":"设置屏幕主题","parameters":{"theme_name":{"description":"主题模式, light 或 dark","type":"string"}}},"SetBrightness":{"description":"设置亮度","parameters":{"brightness":{"description":"0到100之间的整数","type":"number"}}}}}]}
D (21264) wifi:bssid equal: ss_state=0x4
I (21304) MQTT: MqttProtocol::SendText published successfully to topic: device-server
I (21314) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"iot","update":true,"descriptors":[{"name":"TtsSpeaker","description":"TTS语音播报器","properties":{"mqtt_connected":{"description":"MQTT连接状态","type":"boolean"},"last_message":{"description":"最后收到的消息","type":"string"},"queue_size":{"description":"消息队列长度","type":"number"}},"methods":{"speak":{"description":"播报文本","parameters":{"text":{"description":"要播报的文本","type":"string"}}},"reconnect":{"description":"重新连接MQTT","parameters":{}},"publish":{"description":"发布MQTT消息","parameters":{"topic":{"description":"MQTT主题","type":"string"},"message":{"description":"消息内容","type":"string"}}},"clear_queue":{"description":"清空消息队列","parameters":{}}}}]}
I (21384) MQTT: MqttProtocol::SendText published successfully to topic: device-server
I (21394) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"iot","update":true,"descriptors":[{"name":"ClockController","description":"时钟控制器","properties":{"clock_status":{"description":"时钟状态","type":"boolean"}},"methods":{"ControlClock":{"description":"控制时钟开关","parameters":{"state":{"description":"开关状态","type":"string"}}},"ControlFan":{"description":"控制风扇开关","parameters":{"state":{"description":"开关状态","type":"string"}}},"SetFanSpeed":{"description":"设置风扇档位","parameters":{"speed":{"description":"档位（Low/Medium/High）","type":"string"}}}}}]}
I (21444) MQTT: MqttProtocol::SendText published successfully to topic: device-server
I (21454) TtsSpeaker: 音频通道已打开，Session ID: 32cc56d6
I (21454) TtsSpeaker: 发送模拟唤醒词检测 (listen:detect) JSON: 潮州在哪
I (21464) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"listen","state":"detect","text":"潮州在哪"}
I (21474) MQTT: MqttProtocol::SendText published successfully to topic: device-server
I (21484) TtsSpeaker: 设置聆听模式为 AutoStop
I (21484) Application: STATE: listening
D (21494) spi_master: device0 locked the bus
D (21494) spi_master: device0 release bus
D (21504) spi_master: device0 locked the bus
D (21504) spi_master: device0 release bus
D (21504) spi_master: device0 locked the bus
D (21514) spi_master: device0 release bus
D (21514) spi_master: device0 locked the bus
D (21514) spi_master: device0 release bus
D (21524) spi_master: device0 locked the bus
D (21524) spi_master: device0 release bus
D (21534) spi_master: device0 locked the bus
D (21534) SSL TLS: add mbedtls RX buffer
D (21534) spi_master: device0 release bus
D (21534) SSL TLS: end
I (21544) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"iot","update":true,"states":[{"name":"Speaker","state":{"volume":30}},{"name":"Screen","state":{"theme":"dark","brightness":40}},{"name":"TtsSpeaker","state":{"mqtt_connected":true,"last_message":"潮州在哪","queue_size":0}},{"name":"ClockController","state":{"clock_status":false}}]}
D (21544) SSL TLS: RX left 106 bytes
D (21554) spi_master: device0 locked the bus
D (21554) wifi:bssid equal: ss_state=0x4D (21584) spi_master: device0 release bus
D (21584) mqtt_client: mqtt_message_receive: first byte: 0x30
D (21594) transport_base: remain data in cache, need to read again
D (21594) spi_master: device0 locked the bus

D (21604) SSL TLS: add mbedtls RX buffer
D (21604) spi_master: device0 release bus
D (21614) SSL TLS: end
D (21614) spi_master: device0 locked the bus
D (21614) SSL TLS: RX left 105 bytes
D (21624) spi_master: device0 release bus
D (21624) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x69
D (21624) spi_master: device0 locked the bus
D (21634) mqtt_client: mqtt_message_receive: total message length: 107 (already read: 2)
D (21634) spi_master: device0 release bus
D (21644) transport_base: remain data in cache, need to read again
D (21644) spi_master: device0 locked the bus
D (21654) SSL TLS: add mbedtls RX buffer
D (21654) spi_master: device0 release bus
D (21664) SSL TLS: end
D (21664) spi_master: device0 locked the bus
D (21664) mqtt_client: mqtt_message_receive: read_len=105
D (21674) spi_master: device0 release bus
D (21674) mqtt_client: msg_type=3, msg_id=0
D (21684) mqtt_client: deliver_publish, message_length_read=107, message_length=107
D (21694) mqtt_client: deliver_publish: msg_topic_len=29
D (21694) mqtt_client: Get data len= 74, topic len=29, total_data: 74 offset: 0
D (21704) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (21714) Application: STATE: speaking
I (21714) MQTT: MqttProtocol::SendText published successfully to topic: device-server
D (21714) SSL TLS: add mbedtls RX buffer
I (21724) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"listen","state":"start","mode":"auto"}
D (21734) spi_master: device0 locked the bus
D (21734) SSL TLS: end
D (21744) spi_master: device0 release bus
D (21744) SSL TLS: RX left 92 bytes
D (21744) spi_master: device0 locked the bus
D (21754) mqtt_client: mqtt_message_receive: first byte: 0x30
D (21754) spi_master: device0 release bus
D (21764) spi_master: device0 locked the bus
D (21764) transport_base: remain data in cache, need to read again
D (21764) wifi:D (21774) spi_master: device0 release bus
D (21774) SSL TLS: add mbedtls RX buffer
D (21784) SSL TLS: end
D (21784) spi_master: device0 locked the bus
D (21784) SSL TLS: RX left 91 bytes
D (21794) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x5b
D (21794) spi_master: device0 release bus
bssid equal: ss_state=0x4D (21804) spi_master: device0 locked the bus

D (21804) mqtt_client: mqtt_message_receive: total message length: 93 (already read: 2)
D (21814) spi_master: device0 release bus
D (21814) transport_base: remain data in cache, need to read again
D (21824) spi_master: device0 locked the bus
D (21824) SSL TLS: add mbedtls RX buffer
D (21834) spi_master: device0 release bus
D (21834) SSL TLS: end
D (21844) mqtt_client: mqtt_message_receive: read_len=91
D (21844) mqtt_client: msg_type=3, msg_id=0
D (21854) mqtt_client: deliver_publish, message_length_read=93, message_length=93
D (21854) mqtt_client: deliver_publish: msg_topic_len=29
D (21864) mqtt_client: Get data len= 60, topic len=29, total_data: 60 offset: 0
D (21874) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (21884) Application: >> 潮州在哪
I (21884) MQTT: MqttProtocol::SendText published successfully to topic: device-server
D (21884) spi_master: device0 locked the bus
I (21894) TtsSpeaker: 等待服务器TTS响应并进入Speaking状态...
D (21894) spi_master: device0 release bus
D (21904) spi_master: device0 locked the bus
D (21904) spi_master: device0 release bus
I (21914) TtsSpeaker: 检测到设备开始播放TTS (进入Speaking状态)
D (21914) spi_master: device0 locked the bus
D (21924) spi_master: device0 release bus
D (21924) spi_master: device0 locked the bus
D (21934) spi_master: device0 release bus
D (21934) spi_master: device0 locked the bus
D (21934) spi_master: device0 release bus
D (21944) spi_master: device0 locked the bus
D (21944) spi_master: device0 release bus
D (21954) spi_master: device0 locked the bus
D (21954) spi_master: device0 release bus
D (21954) spi_master: device0 locked the bus
D (21964) spi_master: device0 release bus
D (21964) spi_master: device0 locked the bus
D (21964) spi_master: device0 release bus
D (22214) SSL TLS: add mbedtls RX buffer
D (22214) SSL TLS: end
D (22214) SSL TLS: RX left 102 bytes
D (22214) mqtt_client: mqtt_message_receive: first byte: 0x30
D (22224) transport_base: remain data in cache, need to read again
D (22224) SSL TLS: add mbedtls RX buffer
D (22234) SSL TLS: end
D (22234) SSL TLS: RX left 101 bytes
D (22234) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x65
D (22244) mqtt_client: mqtt_message_receive: total message length: 103 (already read: 2)
D (22254) transport_base: remain data in cache, need to read again
D (22254) SSL TLS: add mbedtls RX buffer
D (22264) SSL TLS: end
D (22264) mqtt_client: mqtt_message_receive: read_len=101
D (22264) mqtt_client: msg_type=3, msg_id=0
D (22274) mqtt_client: deliver_publish, message_length_read=103, message_length=103
D (22274) mqtt_client: deliver_publish: msg_topic_len=29
D (22284) mqtt_client: Get data len= 70, topic len=29, total_data: 70 offset: 0
D (22294) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (22304) spi_master: device0 locked the bus
D (22304) spi_master: device0 release bus
D (22304) spi_master: device0 locked the bus
D (22314) spi_master: device0 release bus
D (22314) spi_master: device0 locked the bus
D (22324) spi_master: device0 release bus
D (22324) spi_master: device0 locked the bus
D (22324) spi_master: device0 release bus
D (22334) spi_master: device0 locked the bus
D (22334) spi_master: device0 release bus
D (22334) spi_master: device0 locked the bus
D (22344) spi_master: device0 release bus
D (22884) wifi:bssid equal: ss_state=0x4
D (22954) SSL TLS: add mbedtls RX buffer
D (22954) SSL TLS: end
D (22954) SSL TLS: RX left 157 bytes
D (22954) mqtt_client: mqtt_message_receive: first byte: 0x30
D (22954) transport_base: remain data in cache, need to read again
D (22964) SSL TLS: add mbedtls RX buffer
D (22964) SSL TLS: end
D (22974) SSL TLS: RX left 156 bytes
D (22974) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x9b
D (22984) transport_base: remain data in cache, need to read again
D (22984) SSL TLS: add mbedtls RX buffer
D (22994) SSL TLS: end
D (22994) SSL TLS: RX left 155 bytes
D (22994) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (23004) mqtt_client: mqtt_message_receive: total message length: 158 (already read: 3)
D (23014) transport_base: remain data in cache, need to read again
D (23014) SSL TLS: add mbedtls RX buffer
D (23014) SSL TLS: end
D (23024) mqtt_client: mqtt_message_receive: read_len=155
D (23024) mqtt_client: msg_type=3, msg_id=0
D (23034) mqtt_client: deliver_publish, message_length_read=158, message_length=158
D (23034) mqtt_client: deliver_publish: msg_topic_len=29
D (23044) mqtt_client: Get data len= 124, topic len=29, total_data: 124 offset: 0
D (23054) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (23064) Application: << 潮州位于广东省的东部，靠近福建省。
D (23074) spi_master: device0 locked the bus
D (23074) spi_master: device0 release bus
D (23074) spi_master: device0 locked the bus
D (23074) spi_master: device0 release bus
D (23084) spi_master: device0 locked the bus
D (23084) spi_master: device0 release bus
D (23094) spi_master: device0 locked the bus
D (23094) spi_master: device0 release bus
D (23094) spi_master: device0 locked the bus
D (23104) spi_master: device0 release bus
D (23104) spi_master: device0 locked the bus
D (23104) spi_master: device0 release bus
D (23114) spi_master: device0 locked the bus
D (23114) spi_master: device0 release bus
D (23124) spi_master: device0 locked the bus
D (23124) spi_master: device0 release bus
D (23124) spi_master: device0 locked the bus
D (23134) spi_master: device0 release bus
D (23134) spi_master: device0 locked the bus
D (23144) spi_master: device0 release bus
D (23144) spi_master: device0 locked the bus
D (23144) spi_master: device0 release bus
D (23154) spi_master: device0 locked the bus
D (23154) spi_master: device0 release bus
D (23164) spi_master: device0 locked the bus
D (23164) spi_master: device0 release bus
D (23164) spi_master: device0 locked the bus
D (23174) spi_master: device0 release bus
D (23174) spi_master: device0 locked the bus
D (23174) spi_master: device0 release bus
D (23184) spi_master: device0 locked the bus
D (23184) spi_master: device0 release bus
D (23194) spi_master: device0 locked the bus
D (23194) spi_master: device0 release bus
D (23194) spi_master: device0 locked the bus
D (23204) spi_master: device0 release bus
D (23204) spi_master: device0 locked the bus
D (23214) spi_master: device0 release bus
D (23214) spi_master: device0 locked the bus
D (23214) spi_master: device0 release bus
D (23224) spi_master: device0 locked the bus
D (23224) spi_master: device0 release bus
D (23234) spi_master: device0 locked the bus
D (23234) spi_master: device0 release bus
D (23234) spi_master: device0 locked the bus
D (23244) spi_master: device0 release bus
D (23244) spi_master: device0 locked the bus
D (23244) spi_master: device0 release bus
D (24014) wifi:bssid equal: ss_state=0x4
D (24024) SSL TLS: add mbedtls RX buffer
D (24034) SSL TLS: end
D (24034) SSL TLS: RX left 85 bytes
D (24034) mqtt_client: mqtt_message_receive: first byte: 0x30
D (24034) transport_base: remain data in cache, need to read again
D (24034) SSL TLS: add mbedtls RX buffer
D (24044) SSL TLS: end
D (24044) SSL TLS: RX left 84 bytes
D (24044) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x54
D (24054) mqtt_client: mqtt_message_receive: total message length: 86 (already read: 2)
D (24064) transport_base: remain data in cache, need to read again
D (24064) SSL TLS: add mbedtls RX buffer
D (24074) SSL TLS: end
D (24074) mqtt_client: mqtt_message_receive: read_len=84
D (24074) mqtt_client: msg_type=3, msg_id=0
D (24084) mqtt_client: deliver_publish, message_length_read=86, message_length=86
D (24094) mqtt_client: deliver_publish: msg_topic_len=29
D (24094) mqtt_client: Get data len= 53, topic len=29, total_data: 53 offset: 0
D (24104) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (24214) SSL TLS: add mbedtls RX buffer
D (24214) SSL TLS: end
D (24214) SSL TLS: RX left 158 bytes
D (24214) mqtt_client: mqtt_message_receive: first byte: 0x30
D (24224) transport_base: remain data in cache, need to read again
D (24224) SSL TLS: add mbedtls RX buffer
D (24234) SSL TLS: end
D (24234) SSL TLS: RX left 157 bytes
D (24234) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x9c
D (24244) transport_base: remain data in cache, need to read again
D (24244) SSL TLS: add mbedtls RX buffer
D (24254) SSL TLS: end
D (24254) SSL TLS: RX left 156 bytes
D (24254) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (24264) mqtt_client: mqtt_message_receive: total message length: 159 (already read: 3)
D (24274) transport_base: remain data in cache, need to read again
D (24274) SSL TLS: add mbedtls RX buffer
D (24284) SSL TLS: end
D (24284) mqtt_client: mqtt_message_receive: read_len=156
D (24284) mqtt_client: msg_type=3, msg_id=0
D (24294) mqtt_client: deliver_publish, message_length_read=159, message_length=159
D (24304) mqtt_client: deliver_publish: msg_topic_len=29
D (24304) mqtt_client: Get data len= 125, topic len=29, total_data: 125 offset: 0
D (24314) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (24324) SSL TLS: add mbedtls RX buffer
D (24324) SSL TLS: end
D (24334) SSL TLS: RX left 133 bytes
D (24334) mqtt_client: mqtt_message_receive: first byte: 0x30
D (24334) transport_base: remain data in cache, need to read again
D (24344) SSL TLS: add mbedtls RX buffer
D (24344) SSL TLS: end
D (24344) SSL TLS: RX left 132 bytes
D (24354) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x83
D (24354) transport_base: remain data in cache, need to read again
D (24364) SSL TLS: add mbedtls RX buffer
D (24364) SSL TLS: end
D (24374) SSL TLS: RX left 131 bytes
D (24374) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (24384) mqtt_client: mqtt_message_receive: total message length: 134 (already read: 3)
D (24384) transport_base: remain data in cache, need to read again
D (24394) SSL TLS: add mbedtls RX buffer
D (24394) SSL TLS: end
D (24404) mqtt_client: mqtt_message_receive: read_len=131
D (24404) mqtt_client: msg_type=3, msg_id=0
D (24404) mqtt_client: deliver_publish, message_length_read=134, message_length=134
D (24424) mqtt_client: deliver_publish: msg_topic_len=29
D (24424) mqtt_client: Get data len= 100, topic len=29, total_data: 100 offset: 0
D (24424) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x60
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

0fef7c
I (24434) Application: << 有啥想去的地方吗？
D (25144) wifi:bssid equal: ss_state=0x4
D (25754) wifi:bssid equal: ss_state=0x4
D (26134) SSL TLS: add mbedtls RX buffer
D (26134) SSL TLS: end
D (26134) SSL TLS: RX left 131 bytes
D (26134) mqtt_client: mqtt_message_receive: first byte: 0x30
D (26134) transport_base: remain data in cache, need to read again
D (26144) SSL TLS: add mbedtls RX buffer
D (26144) SSL TLS: end
D (26154) SSL TLS: RX left 130 bytes
D (26154) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x81
D (26164) transport_base: remain data in cache, need to read again
D (26164) wifi:D (26164) SSL TLS: add mbedtls RX buffer
bssid equal: ss_state=0x4D (26174) SSL TLS: end

D (26174) SSL TLS: RX left 129 bytes
D (26174) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (26184) mqtt_client: mqtt_message_receive: total message length: 132 (already read: 3)
D (26194) transport_base: remain data in cache, need to read again
D (26204) SSL TLS: add mbedtls RX buffer
D (26204) SSL TLS: end
D (26204) mqtt_client: mqtt_message_receive: read_len=129
D (26214) mqtt_client: msg_type=3, msg_id=0
D (26214) mqtt_client: deliver_publish, message_length_read=132, message_length=132
D (26224) mqtt_client: deliver_publish: msg_topic_len=29
D (26224) mqtt_client: Get data len= 98, topic len=29, total_data: 98 offset: 0
D (26234) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (26244) SSL TLS: add mbedtls RX buffer
D (26244) SSL TLS: end
D (26254) SSL TLS: RX left 85 bytes
D (26254) mqtt_client: mqtt_message_receive: first byte: 0x30
D (26254) transport_base: remain data in cache, need to read again
D (26264) SSL TLS: add mbedtls RX buffer
D (26264) SSL TLS: end
D (26264) SSL TLS: RX left 84 bytes
D (26274) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x54
D (26284) mqtt_client: mqtt_message_receive: total message length: 86 (already read: 2)
D (26284) transport_base: remain data in cache, need to read again
D (26294) SSL TLS: add mbedtls RX buffer
D (26294) SSL TLS: end
D (26294) mqtt_client: mqtt_message_receive: read_len=84
D (26304) mqtt_client: msg_type=3, msg_id=0
D (26304) mqtt_client: deliver_publish, message_length_read=86, message_length=86
D (26314) mqtt_client: deliver_publish: msg_topic_len=29
D (26324) mqtt_client: Get data len= 53, topic len=29, total_data: 53 offset: 0
D (26324) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (26494) Application: STATE: listening
I (26504) TtsSpeaker: TTS播放后进入Listening状态 (可能已完成或被唤醒打断)
D (26504) spi_master: device0 locked the bus
D (26504) spi_master: device0 release bus
D (26504) spi_master: device0 locked the bus
D (26514) spi_master: device0 release bus
D (26514) spi_master: device0 locked the bus
D (26514) spi_master: device0 release bus
D (26524) spi_master: device0 locked the bus
D (26524) spi_master: device0 release bus
D (26534) spi_master: device0 locked the bus
D (26534) spi_master: device0 release bus
D (26534) spi_master: device0 locked the bus
D (26544) spi_master: device0 release bus
D (26564) spi_master: device0 locked the bus
D (26564) spi_master: device0 release bus
D (26564) spi_master: device0 locked the bus
D (26564) spi_master: device0 release bus
D (26564) spi_master: device0 locked the bus
D (26574) spi_master: device0 release bus
D (26574) spi_master: device0 locked the bus
D (26574) spi_master: device0 release bus
D (26584) spi_master: device0 locked the bus
D (26584) spi_master: device0 release bus
D (26594) spi_master: device0 locked the bus
D (26594) spi_master: device0 release bus
D (26614) spi_master: device0 locked the bus
D (26614) spi_master: device0 release bus
D (26614) spi_master: device0 locked the bus
D (26614) spi_master: device0 release bus
D (26614) spi_master: device0 locked the bus
D (26624) spi_master: device0 release bus
D (26624) spi_master: device0 locked the bus
D (26624) spi_master: device0 release bus
D (26634) spi_master: device0 locked the bus
D (26634) spi_master: device0 release bus
D (26644) spi_master: device0 locked the bus
D (26644) spi_master: device0 release bus
D (26644) spi_master: device0 locked the bus
D (26654) spi_master: device0 release bus
D (26654) spi_master: device0 locked the bus
D (26654) spi_master: device0 release bus
D (26664) spi_master: device0 locked the bus
D (26664) spi_master: device0 release bus
D (26674) spi_master: device0 locked the bus
D (26674) spi_master: device0 release bus
D (26674) spi_master: device0 locked the bus
D (26684) spi_master: device0 release bus
D (26684) spi_master: device0 locked the bus
D (26694) spi_master: device0 release bus
D (26694) spi_master: device0 locked the bus
D (26694) spi_master: device0 release bus
D (26704) spi_master: device0 locked the bus
D (26704) spi_master: device0 release bus
D (26714) spi_master: device0 locked the bus
D (26714) spi_master: device0 release bus
D (26714) spi_master: device0 locked the bus
D (26724) spi_master: device0 release bus
D (26724) spi_master: device0 locked the bus
D (26724) spi_master: device0 release bus
D (26734) spi_master: device0 locked the bus
D (26734) spi_master: device0 release bus
D (26744) spi_master: device0 locked the bus
D (26744) spi_master: device0 release bus
D (26744) spi_master: device0 locked the bus
D (26754) spi_master: device0 release bus
D (26754) spi_master: device0 locked the bus
D (26764) spi_master: device0 release bus
D (26944) SSL TLS: add mbedtls RX buffer
D (26944) SSL TLS: end
D (26944) SSL TLS: RX left 106 bytes
D (26944) mqtt_client: mqtt_message_receive: first byte: 0x30
D (26954) transport_base: remain data in cache, need to read again
D (26954) SSL TLS: add mbedtls RX buffer
D (26964) SSL TLS: end
D (26964) SSL TLS: RX left 105 bytes
D (26964) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x69
D (26974) mqtt_client: mqtt_message_receive: total message length: 107 (already read: 2)
D (26984) transport_base: remain data in cache, need to read again
D (26984) SSL TLS: add mbedtls RX buffer
D (26994) SSL TLS: end
D (26994) mqtt_client: mqtt_message_receive: read_len=105
D (26994) mqtt_client: msg_type=3, msg_id=0
D (27004) mqtt_client: deliver_publish, message_length_read=107, message_length=107
D (27004) mqtt_client: deliver_publish: msg_topic_len=29
D (27014) mqtt_client: Get data len= 74, topic len=29, total_data: 74 offset: 0
D (27024) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (27034) Application: STATE: speaking
D (27034) SSL TLS: add mbedtls RX buffer
D (27034) SSL TLS: end
D (27044) SSL TLS: RX left 101 bytes
D (27044) mqtt_client: mqtt_message_receive: first byte: 0x30
D (27044) transport_base: remain data in cache, need to read again
D (27054) SSL TLS: add mbedtls RX buffer
D (27054) SSL TLS: end
D (27064) SSL TLS: RX left 100 bytes
D (27064) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x64
D (27074) mqtt_client: mqtt_message_receive: total message length: 102 (already read: 2)
D (27074) transport_base: remain data in cache, need to read again
D (27084) SSL TLS: add mbedtls RX buffer
D (27084) SSL TLS: end
D (27094) mqtt_client: mqtt_message_receive: read_len=100
D (27094) mqtt_client: msg_type=3, msg_id=0
D (27094) mqtt_client: deliver_publish, message_length_read=102, message_length=102
D (27104) mqtt_client: deliver_publish: msg_topic_len=29
D (27114) mqtt_client: Get data len= 69, topic len=29, total_data: 69 offset: 0
D (27114) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (27124) Application: >> 常州位于广东。
D (27134) SSL TLS: add mbedtls RX buffer
D (27134) SSL TLS: end
D (27134) SSL TLS: RX left 104 bytes
D (27144) spi_master: device0 locked the bus
D (27144) mqtt_client: mqtt_message_receive: first byte: 0x30
D (27144) spi_master: device0 release bus
D (27154) transport_base: remain data in cache, need to read again
D (27154) spi_master: device0 locked the bus
D (27164) SSL TLS: add mbedtls RX buffer
D (27164) spi_master: device0 release bus
D (27164) SSL TLS: end
D (27174) spi_master: device0 locked the bus
D (27174) SSL TLS: RX left 103 bytes
D (27174) spi_master: device0 release bus
D (27184) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x67
D (27184) spi_master: device0 locked the bus
D (27194) mqtt_client: mqtt_message_receive: total message length: 105 (already read: 2)
D (27194) spi_master: device0 release bus
D (27204) transport_base: remain data in cache, need to read again
D (27204) spi_master: device0 locked the bus
D (27214) SSL TLS: add mbedtls RX buffer
D (27214) spi_master: device0 release bus
D (27224) SSL TLS: end
D (27224) spi_master: device0 locked the bus
D (27224) mqtt_client: mqtt_message_receive: read_len=103
D (27234) spi_master: device0 release bus
D (27234) mqtt_client: msg_type=3, msg_id=0
D (27244) mqtt_client: deliver_publish, message_length_read=105, message_length=105
D (27254) mqtt_client: deliver_publish: msg_topic_len=29
D (27254) spi_master: device0 locked the bus
D (27254) mqtt_client: Get data len= 72, topic len=29, total_data: 72 offset: 0
D (27264) spi_master: device0 release bus
D (27264) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (27274) spi_master: device0 locked the bus
D (27284) SSL TLS: add mbedtls RX buffer
D (27284) spi_master: device0 release bus
D (27284) SSL TLS: end
D (27294) wifi:bssid equal: ss_state=0x4
D (27294) spi_master: device0 locked the bus
D (27294) SSL TLS: RX left 142 bytes
D (27304) spi_master: device0 release bus
D (27304) mqtt_client: mqtt_message_receive: first byte: 0x30
D (27314) spi_master: device0 locked the bus
D (27314) transport_base: remain data in cache, need to read again
D (27314) spi_master: device0 release bus
D (27324) SSL TLS: add mbedtls RX buffer
D (27324) spi_master: device0 locked the bus
D (27334) SSL TLS: end
D (27334) spi_master: device0 release bus
D (27334) SSL TLS: RX left 141 bytes
D (27344) spi_master: device0 locked the bus
D (27344) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x8c
D (27344) spi_master: device0 release bus
D (27354) transport_base: remain data in cache, need to read again
D (27364) spi_master: device0 locked the bus
D (27364) SSL TLS: add mbedtls RX buffer
D (27364) spi_master: device0 release bus
D (27374) SSL TLS: end
D (27374) spi_master: device0 locked the bus
D (27374) SSL TLS: RX left 140 bytes
D (27384) spi_master: device0 release bus
D (27384) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (27394) spi_master: device0 locked the bus
D (27394) mqtt_client: mqtt_message_receive: total message length: 143 (already read: 3)
D (27404) spi_master: device0 release bus
D (27404) transport_base: remain data in cache, need to read again
D (27414) spi_master: device0 locked the bus
D (27414) SSL TLS: add mbedtls RX buffer
D (27424) spi_master: device0 release bus
D (27424) SSL TLS: end
D (27424) spi_master: device0 locked the bus
D (27434) mqtt_client: mqtt_message_receive: read_len=140
D (27434) spi_master: device0 release bus
D (27444) mqtt_client: msg_type=3, msg_id=0
D (27444) spi_master: device0 locked the bus
D (27444) mqtt_client: deliver_publish, message_length_read=143, message_length=143
D (27454) spi_master: device0 release bus
D (27464) mqtt_client: deliver_publish: msg_topic_len=29
D (27464) spi_master: device0 locked the bus
D (27464) mqtt_client: Get data len= 109, topic len=29, total_data: 109 offset: 0
D (27474) spi_master: device0 release bus
D (27484) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (27484) spi_master: device0 locked the bus
I (27494) Application: << 哎呀，这个信息不太对哦。
D (27494) spi_master: device0 release bus
D (27504) spi_master: device0 locked the bus
D (27514) spi_master: device0 release bus
D (27514) spi_master: device0 locked the bus
D (27514) spi_master: device0 release bus
D (27524) spi_master: device0 locked the bus
D (27524) spi_master: device0 release bus
D (27524) spi_master: device0 locked the bus
D (27534) spi_master: device0 release bus
D (27604) spi_master: device0 locked the bus
D (27604) spi_master: device0 release bus
D (27604) spi_master: device0 locked the bus
D (27604) spi_master: device0 release bus
D (27604) spi_master: device0 locked the bus
D (27614) spi_master: device0 release bus
D (27614) spi_master: device0 locked the bus
D (27614) spi_master: device0 release bus
D (27624) spi_master: device0 locked the bus
D (27624) spi_master: device0 release bus
D (27634) spi_master: device0 locked the bus
D (27634) spi_master: device0 release bus
D (27644) spi_master: device0 locked the bus
D (27644) spi_master: device0 release bus
D (27644) spi_master: device0 locked the bus
D (27654) spi_master: device0 release bus
D (27654) spi_master: device0 locked the bus
D (27654) spi_master: device0 release bus
D (27664) spi_master: device0 locked the bus
D (27664) spi_master: device0 release bus
D (27664) spi_master: device0 locked the bus
D (27674) spi_master: device0 release bus
D (27674) spi_master: device0 locked the bus
D (27684) spi_master: device0 release bus
D (27684) spi_master: device0 locked the bus
D (27684) spi_master: device0 release bus
D (27694) spi_master: device0 locked the bus
D (27694) spi_master: device0 release bus
D (27704) spi_master: device0 locked the bus
D (27704) spi_master: device0 release bus
D (27704) spi_master: device0 locked the bus
D (27714) spi_master: device0 release bus
D (27714) spi_master: device0 locked the bus
D (27724) spi_master: device0 release bus
D (27724) spi_master: device0 locked the bus
D (27724) spi_master: device0 release bus
D (27734) spi_master: device0 locked the bus
D (27734) spi_master: device0 release bus
D (27734) spi_master: device0 locked the bus
D (27744) spi_master: device0 release bus
D (27744) spi_master: device0 locked the bus
D (27754) spi_master: device0 release bus
D (28414) wifi:bssid equal: ss_state=0x4
D (29544) wifi:bssid equal: ss_state=0x4
D (29744) wifi:bssid equal: ss_state=0x4
D (29954) wifi:bssid equal: ss_state=0x4
D (30304) SSL TLS: add mbedtls RX buffer
D (30314) SSL TLS: end
D (30314) SSL TLS: RX left 140 bytes
D (30314) mqtt_client: mqtt_message_receive: first byte: 0x30
D (30314) transport_base: remain data in cache, need to read again
D (30314) SSL TLS: add mbedtls RX buffer
D (30324) SSL TLS: end
D (30324) SSL TLS: RX left 139 bytes
D (30324) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x8a
D (30334) transport_base: remain data in cache, need to read again
D (30344) SSL TLS: add mbedtls RX buffer
D (30344) SSL TLS: end
D (30344) SSL TLS: RX left 138 bytes
D (30354) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (30354) mqtt_client: mqtt_message_receive: total message length: 141 (already read: 3)
D (30364) transport_base: remain data in cache, need to read again
D (30374) SSL TLS: add mbedtls RX buffer
D (30374) SSL TLS: end
D (30374) mqtt_client: mqtt_message_receive: read_len=138
D (30384) mqtt_client: msg_type=3, msg_id=0
D (30384) mqtt_client: deliver_publish, message_length_read=141, message_length=141
D (30394) mqtt_client: deliver_publish: msg_topic_len=29
D (30394) mqtt_client: Get data len= 107, topic len=29, total_data: 107 offset: 0
D (30404) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (30414) SSL TLS: add mbedtls RX buffer
D (30414) SSL TLS: end
D (30424) SSL TLS: RX left 154 bytes
D (30424) mqtt_client: mqtt_message_receive: first byte: 0x30
D (30424) transport_base: remain data in cache, need to read again
D (30434) SSL TLS: add mbedtls RX buffer
D (30434) SSL TLS: end
D (30444) SSL TLS: RX left 153 bytes
D (30444) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x98
D (30454) transport_base: remain data in cache, need to read again
D (30454) SSL TLS: add mbedtls RX buffer
D (30464) SSL TLS: end
D (30464) SSL TLS: RX left 152 bytes
D (30464) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (30474) mqtt_client: mqtt_message_receive: total message length: 155 (already read: 3)
D (30484) transport_base: remain data in cache, need to read again
D (30484) SSL TLS: add mbedtls RX buffer
D (30494) SSL TLS: end
D (30494) mqtt_client: mqtt_message_receive: read_len=152
D (30494) mqtt_client: msg_type=3, msg_id=0
D (30504) mqtt_client: deliver_publish, message_length_read=155, message_length=155
D (30504) mqtt_client: deliver_publish: msg_topic_len=29
D (30514) mqtt_client: Get data len= 121, topic len=29, total_data: 121 offset: 0
D (30524) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x60
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

0fef7c
I (30534) Application: << 常州其实是在江苏省，不是广东省。
D (30544) spi_master: device0 locked the bus
D (30544) spi_master: device0 release bus
D (30544) spi_master: device0 locked the bus
D (30544) spi_master: device0 release bus
D (30554) spi_master: device0 locked the bus
D (30554) spi_master: device0 release bus
D (30564) spi_master: device0 locked the bus
D (30564) spi_master: device0 release bus
D (30564) spi_master: device0 locked the bus
D (30574) spi_master: device0 release bus
D (30574) spi_master: device0 locked the bus
D (30584) spi_master: device0 release bus
D (30584) spi_master: device0 locked the bus
D (30584) spi_master: device0 release bus
D (30594) spi_master: device0 locked the bus
D (30594) spi_master: device0 release bus
D (30594) spi_master: device0 locked the bus
D (30604) spi_master: device0 release bus
D (30604) spi_master: device0 locked the bus
D (30614) spi_master: device0 release bus
D (30614) spi_master: device0 locked the bus
D (30614) spi_master: device0 release bus
D (30624) spi_master: device0 locked the bus
D (30624) spi_master: device0 release bus
D (30634) spi_master: device0 locked the bus
D (30634) spi_master: device0 release bus
D (30634) spi_master: device0 locked the bus
D (30644) spi_master: device0 release bus
D (30644) spi_master: device0 locked the bus
D (30644) spi_master: device0 release bus
D (30654) spi_master: device0 locked the bus
D (30654) spi_master: device0 release bus
D (30664) spi_master: device0 locked the bus
D (30664) spi_master: device0 release bus
D (30664) spi_master: device0 locked the bus
D (30674) spi_master: device0 release bus
D (30674) spi_master: device0 locked the bus
D (30684) spi_master: device0 release bus
D (30684) spi_master: device0 locked the bus
D (30684) spi_master: device0 release bus
D (30694) spi_master: device0 locked the bus
D (30694) spi_master: device0 release bus
D (30704) spi_master: device0 locked the bus
D (30704) spi_master: device0 release bus
D (30704) spi_master: device0 locked the bus
D (30714) spi_master: device0 release bus
D (30714) spi_master: device0 locked the bus
D (30714) spi_master: device0 release bus
D (31084) wifi:bssid equal: ss_state=0x4
D (32204) wifi:bssid equal: ss_state=0x4
D (33334) wifi:bssid equal: ss_state=0x4
D (33604) SSL TLS: add mbedtls RX buffer
D (33604) SSL TLS: end
D (33614) SSL TLS: RX left 331 bytes
D (33614) mqtt_client: mqtt_message_receive: first byte: 0x30
D (33614) transport_base: remain data in cache, need to read again
D (33614) SSL TLS: add mbedtls RX buffer
D (33624) SSL TLS: end
D (33624) SSL TLS: RX left 330 bytes
D (33624) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x96
D (33634) transport_base: remain data in cache, need to read again
D (33634) SSL TLS: add mbedtls RX buffer
D (33644) SSL TLS: end
D (33644) SSL TLS: RX left 329 bytes
D (33644) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (33654) mqtt_client: mqtt_message_receive: total message length: 153 (already read: 3)
D (33664) transport_base: remain data in cache, need to read again
D (33664) SSL TLS: add mbedtls RX buffer
D (33674) SSL TLS: end
D (33674) SSL TLS: RX left 179 bytes
D (33674) mqtt_client: mqtt_message_receive: read_len=150
D (33684) mqtt_client: msg_type=3, msg_id=0
D (33684) mqtt_client: deliver_publish, message_length_read=153, message_length=153
D (33694) mqtt_client: deliver_publish: msg_topic_len=29
D (33694) mqtt_client: Get data len= 119, topic len=29, total_data: 119 offset: 0
D (33704) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

D (33714) transport_base: remain data in cache, need to read again
D (33724) transport_base: remain data in cache, need to read again
D (33724) SSL TLS: add mbedtls RX buffer
D (33734) SSL TLS: end
D (33734) SSL TLS: RX left 178 bytes
D (33734) mqtt_client: mqtt_message_receive: first byte: 0x30
D (33744) transport_base: remain data in cache, need to read again
D (33744) SSL TLS: add mbedtls RX buffer
D (33754) SSL TLS: end
D (33754) SSL TLS: RX left 177 bytes
D (33754) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0xb0
D (33764) transport_base: remain data in cache, need to read again
D (33774) SSL TLS: add mbedtls RX buffer
D (33774) SSL TLS: end
D (33774) SSL TLS: RX left 176 bytes
D (33774) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x1
D (33784) mqtt_client: mqtt_message_receive: total message length: 179 (already read: 3)
D (33794) transport_base: remain data in cache, need to read again
D (33804) SSL TLS: add mbedtls RX buffer
D (33804) SSL TLS: end
D (33804) mqtt_client: mqtt_message_receive: read_len=176
D (33814) mqtt_client: msg_type=3, msg_id=0
D (33814) mqtt_client: deliver_publish, message_length_read=179, message_length=179
D (33824) mqtt_client: deliver_publish: msg_topic_len=29
D (33824) mqtt_client: Get data len= 145, topic len=29, total_data: 145 offset: 0
D (33834) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (33844) Application: << 那边有美丽的运河和古色古香的建筑，也是个好地方！
D (33844) wifi:bssid equal: ss_state=0x4
D (33864) spi_master: device0 locked the bus
D (33864) spi_master: device0 release bus
D (33864) spi_master: device0 locked the bus
D (33864) spi_master: device0 release bus
D (33874) spi_master: device0 locked the bus
D (33874) spi_master: device0 release bus
D (33884) spi_master: device0 locked the bus
D (33884) spi_master: device0 release bus
D (33884) spi_master: device0 locked the bus
D (33894) spi_master: device0 release bus
D (33894) spi_master: device0 locked the bus
D (33894) spi_master: device0 release bus
D (33904) spi_master: device0 locked the bus
D (33904) spi_master: device0 release bus
D (33914) spi_master: device0 locked the bus
D (33914) spi_master: device0 release bus
D (33914) spi_master: device0 locked the bus
D (33924) spi_master: device0 release bus
D (33924) spi_master: device0 locked the bus
D (33934) spi_master: device0 release bus
D (33934) spi_master: device0 locked the bus
D (33934) spi_master: device0 release bus
D (33944) spi_master: device0 locked the bus
D (33944) spi_master: device0 release bus
D (33944) wifi:bssid equal: ss_state=0x4
D (33954) spi_master: device0 locked the bus
D (33954) spi_master: device0 release bus
D (33964) spi_master: device0 locked the bus
D (33964) spi_master: device0 release bus
D (33964) spi_master: device0 locked the bus
D (33974) spi_master: device0 release bus
D (33974) spi_master: device0 locked the bus
D (33984) spi_master: device0 release bus
D (33984) spi_master: device0 locked the bus
D (33984) spi_master: device0 release bus
D (33994) spi_master: device0 locked the bus
D (33994) spi_master: device0 release bus
D (34004) spi_master: device0 locked the bus
D (34004) spi_master: device0 release bus
D (34004) spi_master: device0 locked the bus
D (34014) spi_master: device0 release bus
D (34014) spi_master: device0 locked the bus
D (34014) spi_master: device0 release bus
D (34024) spi_master: device0 locked the bus
D (34024) spi_master: device0 release bus
D (34034) spi_master: device0 locked the bus
D (34034) spi_master: device0 release bus
D (34034) spi_master: device0 locked the bus
D (34044) spi_master: device0 release bus
D (34044) spi_master: device0 locked the bus
D (34044) spi_master: device0 release bus
D (34054) spi_master: device0 locked the bus
D (34054) spi_master: device0 release bus
D (34064) spi_master: device0 locked the bus
D (34064) spi_master: device0 release bus
D (35074) wifi:bssid equal: ss_state=0x4
D (36204) wifi:bssid equal: ss_state=0x4
I (36494) Application: Free internal: 10943 minimal internal: 10379
I (36684) Application: Abort speaking
I (36684) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"abort"}
I (36684) MQTT: MqttProtocol::SendText published successfully to topic: device-server
D (36704) SSL TLS: add mbedtls RX buffer
D (36704) SSL TLS: end
D (36714) SSL TLS: RX left 85 bytes
D (36714) mqtt_client: mqtt_message_receive: first byte: 0x30
D (36714) transport_base: remain data in cache, need to read again
D (36714) SSL TLS: add mbedtls RX buffer
D (36724) SSL TLS: end
D (36724) SSL TLS: RX left 84 bytes
D (36724) mqtt_client: mqtt_message_receive: read "remaining length" byte: 0x54
D (36734) mqtt_client: mqtt_message_receive: total message length: 86 (already read: 2)
D (36744) transport_base: remain data in cache, need to read again
D (36744) SSL TLS: add mbedtls RX buffer
D (36754) SSL TLS: end
D (36754) mqtt_client: mqtt_message_receive: read_len=84
D (36754) mqtt_client: msg_type=3, msg_id=0
D (36764) mqtt_client: deliver_publish, message_length_read=86, message_length=86
D (36774) mqtt_client: deliver_publish: msg_topic_len=29
D (36774) mqtt_client: Get data len= 53, topic len=29, total_data: 53 offset: 0
D (36784) event: running post MQTT_EVENTS:6 with handler 0x42022294 and context 0x600fefbc on loop 0x600fef7c
--- 0x42022294: EspMqtt::Connect(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)::{lambda(void*, char const*, long, void*)#1}::_FUN(void*, char const*, long, void*) at D:/Study/ESP32CODE/xiaozhi-esp32/managed_components/78__esp-ml307/esp_mqtt.cc:39

I (36794) Application: STATE: listening
D (36794) spi_master: device0 locked the bus
D (36794) spi_master: device0 release bus
D (36804) spi_master: device0 locked the bus
D (36804) spi_master: device0 release bus
D (36814) spi_master: device0 locked the bus
D (36814) spi_master: device0 release bus
D (36824) spi_master: device0 locked the bus
D (36824) spi_master: device0 release bus
D (36824) spi_master: device0 locked the bus
D (36834) spi_master: device0 release bus
D (36834) spi_master: device0 locked the bus
D (36834) spi_master: device0 release bus
I (36844) MQTT: MqttProtocol::SendText sending: {"session_id":"32cc56d6","type":"listen","state":"start","mode":"auto"}
D (36854) spi_master: device0 locked the bus
D (36854) spi_master: device0 release bus
D (36854) spi_master: device0 locked the bus
D (36864) spi_master: device0 release bus
D (36864) spi_master: device0 locked the bus
D (36874) spi_master: device0 release bus
D (36874) spi_master: device0 locked the bus
D (36874) spi_master: device0 release bus
D (36884) spi_master: device0 locked the bus
D (36884) spi_master: device0 release bus
D (36894) spi_master: device0 locked the bus
D (36894) spi_master: device0 release bus
I (36904) MQTT: MqttProtocol::SendText published successfully to topic: device-server
D (37324) wifi:bssid equal: ss_state=0x4
D (37944) wifi:bssid equal: ss_state=0x4
D (38144) wifi:bssid equal: ss_state=0x4